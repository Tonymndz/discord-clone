(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[0],{119:function(e,n,t){},124:function(e,n,t){},126:function(e,n,t){},129:function(e,n,t){},130:function(e,n,t){},131:function(e,n,t){},133:function(e,n,t){},142:function(e,n,t){},143:function(e,n,t){},144:function(e,n,t){},1582:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),s=t(11),i=t.n(s),r=(t(119),t(67)),o=t.n(r),l=t(88),d=t(28),j=t(50),u=t(69),h=t.n(u),b=t(94),m=t.n(b),O=t(95),p=t.n(O),f=t(96),x=t.n(f),v=t(97),g=t.n(v),N=t(47),S=Object(N.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,n){e.channelId=n.payload.channelId,e.channelName=n.payload.channelName}}}),C=S.actions.setChannelInfo,I=function(e){return e.app.channelId},y=function(e){return e.app.channelName},_=S.reducer,w=(t(124),t(5));var k=function(e){var n=e.id,t=e.channelName,a=e.isSelectedChannel,c=e.selectChannel,s=Object(d.b)();return Object(w.jsx)("div",{className:"SidebarChannel".concat(a?"-active":"-unactive"),onClick:function(){c(),s(C({channelId:n,channelName:t}))},children:Object(w.jsxs)("h4",{children:[Object(w.jsx)("span",{className:"SidebarChannel_hash",children:"#"}),t]})})},E=t(1608),z=Object(N.b)({name:"user",initialState:{user:null},reducers:{login:function(e,n){e.user=n.payload},logout:function(e){e.user=null}}}),T=z.actions,M=T.login,A=(T.logout,function(e){return e.user.user}),H=z.reducer,D=(t(126),t(43)),K=D.a.initializeApp({apiKey:"AIzaSyArzU5IKtR9yTaiH7T6eSUk037Kpi21Aew",authDomain:"discord-clone-yt2.firebaseapp.com",projectId:"discord-clone-yt2",storageBucket:"discord-clone-yt2.appspot.com",messagingSenderId:"585254623929",appId:"1:585254623929:web:57a08d3130d8223c711968",measurementId:"G-NGNZ4VKXFK"}).firestore(),R=D.a.auth(),U=(new D.a.auth.GoogleAuthProvider,K);var W=function(){var e=Object(d.c)(A),n=Object(a.useState)([]),t=Object(j.a)(n,2),c=t[0],s=t[1],i=Object(d.b)(),r=Object(a.useState)(0),o=Object(j.a)(r,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){U.collection("channels").onSnapshot((function(e){var n=e.docs[0];n&&i(C({channelId:n.id,channelName:n.data().channelName})),s(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[i]),Object(w.jsxs)("div",{className:"Sidebar",children:[Object(w.jsxs)("div",{className:"Sidebar_top",children:[Object(w.jsx)("h3",{children:"General"}),Object(w.jsx)(h.a,{})]}),Object(w.jsxs)("div",{className:"Sidebar_channels",children:[Object(w.jsxs)("div",{className:"Sidebar_channelsHeader",children:[Object(w.jsxs)("div",{className:"Sidebar_header",children:[Object(w.jsx)(h.a,{}),Object(w.jsx)("h4",{children:"Text Channels"})]}),Object(w.jsx)(m.a,{onClick:function(){var e=prompt("Enter a new channel name");e&&U.collection("channels").add({channelName:e})},className:"Sidebar_addChannel"})]}),Object(w.jsx)("div",{className:"Sidebar_channelsList",children:c.map((function(e,n){var t=e.id,a=e.channel;return Object(w.jsx)(k,{id:t,channelName:a.channelName,isSelectedChannel:n===l,selectChannel:function(){return u(n)}},t)}))})]}),Object(w.jsxs)("div",{className:"Sidebar_profile",children:[Object(w.jsxs)("div",{className:"Sidebar_profileInfo",children:[Object(w.jsx)(E.a,{src:e.photo}),Object(w.jsxs)("div",{className:"Sidebar_profileDescription",children:[Object(w.jsx)("h3",{children:e.displayName}),Object(w.jsxs)("h3",{id:"profile_id",children:["#",e.uid.substring(0,5)]})]})]}),Object(w.jsxs)("div",{className:"Sidebar_profileIcons",children:[Object(w.jsx)(p.a,{}),Object(w.jsx)(x.a,{}),Object(w.jsx)(g.a,{})]})]})]})},B=t(98),G=t.n(B),P=t(99),F=t.n(P),V=t(100),J=t.n(V),L=t(101),q=t.n(L),X=t(102),Z=t.n(X),$=t(103),Q=t.n($);t(129);var Y=function(e){var n=e.channelName;return Object(w.jsxs)("div",{className:"ChatHeader",children:[Object(w.jsx)("div",{className:"ChatHeader_left",children:Object(w.jsxs)("h3",{children:[Object(w.jsx)("span",{className:"ChatHeader_hash",children:"#"}),n]})}),Object(w.jsxs)("div",{className:"ChatHeader_right",children:[Object(w.jsx)(G.a,{}),Object(w.jsx)(F.a,{}),Object(w.jsx)(J.a,{}),Object(w.jsxs)("div",{className:"ChatHeader_search",children:[Object(w.jsx)("input",{placeholder:"Search"}),Object(w.jsx)(q.a,{})]}),Object(w.jsx)(Z.a,{}),Object(w.jsx)(Q.a,{})]})]})},ee=t(108),ne=t.n(ee),te=(t(130),t(104)),ae=t.n(te);t(131);var ce=function(e){var n=e.timestamp,t=e.user,a=e.message,c=ae()(a);return Object(w.jsxs)("div",{className:"Message",children:[Object(w.jsx)(E.a,{src:t.photo}),Object(w.jsxs)("div",{className:"Message_info",children:[Object(w.jsx)("h4",{children:t.displayName}),Object(w.jsx)("span",{className:"Message_timestamp",children:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString().split(" ").slice(0,4).join(" ")}),Object(w.jsx)("p",{children:c?Object(w.jsx)("img",{src:a,alt:a}):a})]})]})},se=t(39),ie=t(38),re=t(1606),oe=t(111),le=t(105),de=t.n(le),je=(t(73),t(133),function(e){e.input;var n=e.addEmojiToInput,t=Object(ie.usePopupState)({variant:"popover",popupId:"demoMenu"});return Object(w.jsxs)("div",{className:"EmojiPopUp",children:[Object(w.jsx)(de.a,Object(se.a)({fontSize:"large"},Object(ie.bindTrigger)(t))),Object(w.jsx)(re.a,Object(se.a)(Object(se.a)({},Object(ie.bindMenu)(t)),{},{getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(w.jsx)(oe.a,{style:{background:"#2f3136",borderColor:"#202225"},set:"twitter",onSelect:function(e){var a=e.native;n(a),t.close(e)},theme:"dark"})}))]})}),ue=t(107),he=t.n(ue),be=t(110),me=(t(142),function(e){var n=e.sendEmoji,t=Object(ie.usePopupState)({variant:"popover",popupId:"demoMenu"});return Object(w.jsxs)("div",{className:"GIFPopUp",children:[Object(w.jsx)(he.a,Object(se.a)({fontSize:"large"},Object(ie.bindTrigger)(t))),Object(w.jsx)(re.a,Object(se.a)(Object(se.a)({},Object(ie.bindMenu)(t)),{},{getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(w.jsx)("div",{className:"searchboxWrapper",children:Object(w.jsx)(be.a,{apiKey:"9Ixlv3DWC1biJRI57RanyL7RTbfzz0o7",onSelect:function(e){return a=e.images.original.url,n(a),void t.close();var a},masonryConfig:[{columns:2,imageWidth:110,gutter:5},{mq:"700px",columns:3,imageWidth:120,gutter:5}]})})}))]})});var Oe=function(){var e=Object(d.c)(A),n=Object(d.c)(I),t=Object(d.c)(y),c=Object(a.useState)(""),s=Object(j.a)(c,2),i=s[0],r=s[1],o=Object(a.useState)([]),l=Object(j.a)(o,2),u=l[0],h=l[1],b=Object(a.useRef)(null);return Object(a.useEffect)((function(){n&&U.collection("channels").doc(n).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return e.data()})))}))}),[n]),Object(a.useEffect)((function(){return b.current.scrollIntoView({behavior:"smooth"})}),[u]),Object(w.jsxs)("div",{className:"Chat",children:[Object(w.jsx)(Y,{channelName:t}),Object(w.jsxs)("div",{className:"Chat_messages",children:[u.slice().reverse().map((function(e){var n=e.timestamp,t=e.message,a=e.user;return Object(w.jsx)(ce,{user:a,message:t,timestamp:n},n+t+a)})),Object(w.jsx)("div",{ref:b})]}),Object(w.jsxs)("div",{className:"Chat_input",children:[Object(w.jsx)(ne.a,{fontSize:"large"}),Object(w.jsxs)("form",{children:[Object(w.jsx)("input",{placeholder:"Message #".concat(t),disabled:!n,value:i,onChange:function(e){return r(e.target.value)}}),Object(w.jsx)("button",{className:"Chat_inputButton",type:"submit",onClick:function(t){t&&t.preventDefault(),U.collection("channels").doc(n).collection("messages").add({timestamp:D.a.firestore.FieldValue.serverTimestamp(),message:i,user:e}),r("")},children:"Send Message"})]}),Object(w.jsxs)("div",{className:"Chat_inputIcons",children:[Object(w.jsx)(me,{sendEmoji:function(t){U.collection("channels").doc(n).collection("messages").add({timestamp:D.a.firestore.FieldValue.serverTimestamp(),message:t,user:e}),r("")}}),Object(w.jsx)(je,{addEmojiToInput:function(e){return r(i+e)}})]})]})]})};t(143),t(1607),t(144);var pe=t(70),fe=t.n(pe),xe=t(109),ve=t.n(xe);var ge=function(){var e=Object(d.b)(),n=Object(d.c)(A);return Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function n(){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ve.a.get("https://source.unsplash.com/random");case 2:return n.next=4,n.sent.request.responseURL;case 4:t=n.sent,console.log(t),R.signInAnonymously().then((function(n){e(M({uid:n.user.uid,photo:t,email:fe.a.internet.email(),displayName:fe.a.name.firstName()}))})).catch((function(e){return alert(e.message)}));case 7:case"end":return n.stop()}}),n)})))()}),[e]),n?Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(W,{}),Object(w.jsx)(Oe,{})]}):Object(w.jsx)("div",{style:{background:"#36393f",height:"100vh"}})},Ne=Object(N.a)({reducer:{user:H,app:_}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(d.a,{store:Ne,children:Object(w.jsx)(ge,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[1582,1,2]]]);
//# sourceMappingURL=main.9c767627.chunk.js.map